# Шаблон модального окна

**WARNING**

**Не будет работать в IE 11**

Модальное окно создается по шаблонy

```html
<div class="fili-modal" data-modal-id="modal-two">
  <span class="fili-modal__close-btn" data-modal-close="close">
    <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <g id="cross">
        <line class="cls-1" x1="7" x2="25" y1="7" y2="25"></line>
        <line class="cls-1" x1="7" x2="25" y1="25" y2="7"></line>
      </g>
    </svg>
  </span>
  <div class="fili-modal__content" data-modal="content">Контент</div>
</div>
```

Модификатор **data-modal-show="true"** определяет, будет ли модальное окно показываться при загрузке страницы

## Кнопка вывоза модального окна

```html
<button data-modal-button='modal-two'>Открыть модальное окно</button>
```
Кнопке присваиваем `data-modal-button='modal-two'`, значение data-атрибута совпадает с data-modal-id модального окна. Вы можете выбрать любое подходящее имя.

## События при закрытии и открытии окна

Добавляем к имени окна data-modal-id _-open_ и _-close_ и получим события, которые отрабатывают
при открытии и закрытии окна. Очень удобно использовать, когда мы хотим отловить закрытие и открытие окна. Например, чтобы запустить/остановить видео/аудио или отправить событие в аналитику.

```js
document.addEventListener('modal-one-open', () => console.log('modal-one-open'));
document.addEventListener('modal-one-close', () => console.log('modal-one-close'));
```

## Функционал

Чтобы инициализировать модуль модального окна нужно вызвать функцию  
_filiModule.modal.init(config);_

config - это объект с параметрами. Это необязательный параметр.

```js
const config = {
  showClassName: "filiModalFadeInDown",
  hideClassName: "filiModalFadeOutUp",
  baseIndex: 10000,
  delay: 450,
};
```

_showClassName_ - класс, который будет присвоен, когда модальное окно вызвано (на него вешать анимацию появления)  
_hideClassName_ - класс, который будет присвоен, когда модальное окно будет убрано (на него вешать анимацию исчезновения)  
_baseIndex_ - zIndex для модального окна. Может быть открыто несколько окон, поэтому у следующего модального окна zIndex всегда будет выше.  
_delay_ - Задержка в MS, после которой исчезает оверлей (затемнение)

Чтобы вызвать модальное окно вручную, нужно вызвать функцию **filiModule.modal.open('{ID}')** указав ID нужного модального окна  
Например: **filiModule.modal.open('modal-two')**

# Модуль вызова функций по очереди.

Внутри filiModule есть функция **filiModule.switchBanners.load(banner[], cb(banner))**.  
cb - то, что будет выполняться.  
banner[] - массив объектов с данными.

```js
const banner = {
  time: number, // Время в минутах, параметр обязательный
  endTime: number, // Время конец, указываем ноль
  name: string, // Имя тоже обязательный параметр, по нему скрипт будет идентифицировать баннер
  [key: string]: string | number
}
```

## Как это работает?

Модуль был создан, чтобы управлять показом баннеров на разных страницах, выстраивая их очереди.  
Например, мы можем взять 4 баннера и показывать их по очереди на определенных страницах.  
Допустим, у нас есть баннер 1, 2, 3. И мы должны показывать их раз в час, не более 1 баннера за раз. Если мы показали баннер 1, тогда показываем баннер 2, а если уже показали баннер 2, то показываем баннер 3. Настройка кода будет выглядеть вот так:

```js
filiModule.switchBanners.load(
    [
        {
          time: 3,
          endTime: 0,
          name: "one",
          ...,
        },        {
          time: 3,
          endTime: 0,
          name: "two",
          ...,
        },
    ],
    callback
);
```
Мы можем вызвать эту функцию, например на главной и на второстепенных страницах. Информация о показанном баннере будет храниться в localStorage. По имени функция проверит, прошло ли указанное время (в часах), стоит показать следующий баннер или тот, у которого истекло время.  
**callback** принимает текущий баннер. Это означает, что вы можете передать любую логику внутри своего callback, опираясь на данные из объекта **banner**

# Команды

Чтобы запустить development режим - **npm start**  
Чтобы запустить режим сборки - **npm run build**
